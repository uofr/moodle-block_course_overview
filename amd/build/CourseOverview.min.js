define(["jquery","core/ajax","core/notification"],function(a,b,c){function d(b,c){a(j.TAB_CONTENT).on("click",j.OVIEW_TOGGLE,{showText:b,hideText:c},e),a(j.TAB_CONTENT).on("click",j.FAV_LINK,f),a(j.TAB_CONTENT).on("click",j.UNFAV_LINK,h),a(document).ready(function(){a(".help-icon").popover("hide")})}function e(b){b.preventDefault();var c=a(this),d=a(this).parent().parent().parent().parent(),e=d.find(".activity-overviews");e.toggleClass("overview-hide"),e.hasClass("overview-hide")?c.text(b.data.showText):c.text(b.data.hideText)}function f(d){d.preventDefault(),b.call(new Array({methodname:"block_course_overview_add_favourite",args:{courseid:a(this).parent().parent().parent().attr("data-courseid")},done:g,fail:c.exception}))}function g(b){var c=a(j.COURSES_TAB+" "+j.COURSE+"[data-courseid="+b.courseid+"]"),d=c.find(j.FAV_LINK),e=a("<i></i>").addClass("icon fa fa-fw fa-star").attr("title",b.favouritealt);d.html(e),d.attr("alt",b.favouritealt),d.removeClass("notfav").addClass("isfav"),a(j.FAVOURITES_TAB).append(c.clone()),b.keepfavourites||c.remove()}function h(d){d.preventDefault(),b.call(new Array({methodname:"block_course_overview_remove_favourite",args:{courseid:a(this).parent().parent().parent().attr("data-courseid")},done:i,fail:c.exception}))}function i(b){var c=a(j.FAVOURITES_TAB+" "+j.COURSE+"[data-courseid="+b.courseid+"]"),d=c.find(j.UNFAV_LINK),e=a("<i></i>").addClass("icon fa fa-fw fa-star-o").attr("title",b.favouritealt);d.html(e),d.attr("alt",b.favouritealt),d.removeClass("isfav").addClass("notfav"),b.keepfavourites?a(j.COURSES_TAB+" "+j.COURSE+"[data-courseid="+b.courseid+"]").replaceWith(c.clone()):a(j.COURSES_TAB).append(c.clone()),c.remove()}var j={OVIEW_TOGGLE:".overview-toggle",FAV_LINK:".notfav",UNFAV_LINK:".isfav",COURSE:".courseovbox",COURSES_TAB:"#courses .course-list",FAVOURITES_TAB:"#favourites .course-list",TAB_CONTENT:"#course_overview_tabs"};return{init:d}});